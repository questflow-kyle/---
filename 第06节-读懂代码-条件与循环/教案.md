# 第6节：读懂代码 -- 条件与循环

## 课时信息

| 项目 | 内容 |
|:---|:---|
| 所属阶段 | 基础课（第6节/共8节） |
| 主讲 | 沈林伟 |
| 辅助 | 梅杭俊（巡场、辅助答疑） |
| 时长 | 45 分钟 |
| 前置要求 | 学员已完成第5节，能用 Claude Code 生成并运行 Python 代码 |

## 教学目标

学完本节课，学员能够：

1. 读懂 AI 生成代码中的 if/else（程序会做判断）
2. 读懂 AI 生成代码中的 for 循环（程序会重复做事）
3. 修改条件和循环中的具体参数（改判断条件、改循环内容）
4. 用中文先描述逻辑，再让 AI 翻译成代码

## 核心理念（上课前讲师务必读）

> **本节课不是"教编程"，而是"教读代码"。**
>
> 学员不需要自己写出 if/else 或 for 循环。他们需要做到的是：
> - 看到 `if overtime > 0:` 能说出"这是在判断有没有加班"
> - 看到 `for file in files:` 能说出"这是在对每个文件做事"
> - 能把判断条件从 `> 0` 改成 `> 2`，把加班倍率从 `1.5` 改成 `2.0`
>
> 全部代码由 Claude Code 生成。学员的角色是**阅读者和修改者**，不是编写者。

---

## 教学流程

### 第一部分：学员回顾（5分钟）[0:00-0:05]

**讲师操作：**

> 讲师说："上节课我们学了用 Claude Code 写程序。谁来说说上节课的关键步骤？"

- 请1-2位学员简要回顾第5节内容（用 Claude Code 生成代码、运行代码、变量和输入输出）
- 如果学员说不出来，讲师引导："我们上节课用 Claude Code 做了什么？生成了什么样的程序？"

**预期回答要点：**
- 用 Claude Code 让 AI 写代码
- 运行 `python3 文件名.py`
- 变量是"贴标签的盒子"，input 是输入，print 是输出

**讲师总结（30秒）：**

> "很好。上节课程序是从头到尾按顺序跑的。但现实中，我们做事不是永远一条直线——有时候要根据情况选择，有时候同样的事要重复做很多次。今天我们来看看程序是怎么做到这两件事的。"

---

### 第二部分：条件判断 -- 让 Claude Code 写工资计算器（12分钟）[0:05-0:17]

#### 2.1 概念引入（2分钟）

**讲师说：**

> "大家想一个场景：算工资的时候，如果有加班，加班那部分要按1.5倍算。如果没加班，就只发基本工资。这就是**判断**——根据情况走不同的路。程序也能做这个事情，用的就是 if/else。"
>
> "我们不需要自己写这个代码。让 Claude Code 来写，我们来**读懂**它。"

#### 2.2 用 Claude Code 生成工资计算器（3分钟）

**讲师操作（投影演示）：**

在终端中输入：

```
claude "写一个工资计算器的Python程序：输入基本工资（每小时25元）和本月加班小时数。如果加班小时数大于0，加班部分按1.5倍计算。输出应发工资。把代码保存到 wage.py"
```

**预期 Claude Code 生成的代码（`wage.py`）：**

```python
# 工资计算器
base_rate = 25  # 每小时基本工资

hours_overtime = float(input("请输入本月加班小时数："))

if hours_overtime > 0:
    overtime_pay = hours_overtime * base_rate * 1.5
    print(f"加班费：{overtime_pay} 元")
else:
    overtime_pay = 0
    print("本月没有加班费")

monthly_base = 22 * 8 * base_rate  # 22天 x 8小时
total = monthly_base + overtime_pay
print(f"基本工资：{monthly_base} 元")
print(f"应发工资：{total} 元")
```

> **注意**：Claude Code 实际生成的代码可能与上面不完全一样，但核心结构（if/else 判断加班）会一致。讲师根据实际生成结果灵活讲解，但下面的逐行阅读指南仍然适用。

#### 2.3 逐行阅读代码（5分钟）-- 这是本节核心

**讲师说：**

> "代码生成了。现在我们来**读**这段代码。不需要背，就是读懂每一行在做什么。"

**逐行阅读指南：**

用投影仪显示代码，讲师用光标或手指逐行指：

| 代码行 | 讲师说 |
|:---|:---|
| `base_rate = 25` | "这行是定义基本工资，每小时25块。还记得上节课的变量吗？这就是一个变量。" |
| `hours_overtime = float(input(...))` | "这行是让你输入加班小时数。float 是把你输入的文字变成数字，因为后面要做计算。" |
| `if hours_overtime > 0:` | **（重点）** "**看这行！这就是今天的主角。** if 的意思是'如果'。这行代码在说：'如果加班小时数大于0'——也就是说，有加班。" |
| 缩进的两行 | "注意这两行往右缩进了。缩进的意思是：**只有上面那个 if 条件满足了，才会执行这两行。** 就像说'如果下雨，带伞'——'带伞'这个动作是在'下雨'条件满足时才做的。" |
| `else:` | "else 是'否则'的意思。如果加班小时数不大于0——也就是没加班——就走这条路。" |
| 剩余行 | "最后几行是把基本工资和加班费加在一起，打印出来。" |

**关键强调（讲师务必说）：**

> "总结一下：`if` 就是'如果'，`else` 就是'否则'。程序碰到 if 就会做一个判断，条件满足走上面，不满足走下面。**就这么简单。**"

#### 2.4 运行 + 修改（2分钟）

**讲师操作：**

1. 运行代码：`python3 wage.py`
2. 输入加班 `10`，看到加班费计算结果
3. 再运行一次，输入 `0`，看到走了 else 那条路

**修改演示：**

> "现在假设公司规定加班费从1.5倍涨到2倍了。我们让 Claude Code 帮我们改。"

```
claude "把 wage.py 里的加班费倍率从1.5改成2.0"
```

运行验证。

> "看，改一个数字，整个计算就变了。这就是**读懂代码之后能做的事**。"

---

### 第三部分：循环 -- 让 Claude Code 写批量文件重命名器（12分钟）[0:17-0:29]

#### 3.1 概念引入（2分钟）

**讲师说：**

> "第二个概念：循环。场景：你有100张照片要改名字，加上日期前缀。你会一个一个手动改吗？程序可以自动重复这个操作100次。这就是**循环**。"

#### 3.2 用 Claude Code 生成批量重命名器（3分钟）

**讲师操作（投影演示）：**

先创建练习文件：

```
claude "在当前目录下创建一个 test_files 文件夹，里面放5个空的文本文件：报告1.txt、报告2.txt、报告3.txt、报告4.txt、报告5.txt"
```

然后生成重命名代码：

```
claude "写一个Python程序，遍历 test_files 文件夹中的所有 .txt 文件，在每个文件名前加上今天的日期前缀（格式：2026-02-19_），保存到 rename.py"
```

**预期 Claude Code 生成的代码（`rename.py`）：**

```python
import os
from datetime import date

folder = "test_files"
today = date.today().strftime("%Y-%m-%d")

files = os.listdir(folder)

for filename in files:
    if filename.endswith(".txt"):
        old_path = os.path.join(folder, filename)
        new_name = f"{today}_{filename}"
        new_path = os.path.join(folder, new_name)
        os.rename(old_path, new_path)
        print(f"已重命名：{filename} → {new_name}")

print("全部完成！")
```

#### 3.3 逐行阅读代码（5分钟）-- 本节核心

**逐行阅读指南：**

| 代码行 | 讲师说 |
|:---|:---|
| `import os` / `from datetime import date` | "前两行是导入工具包。就像做饭之前先把锅碗瓢盆拿出来。os 是操作文件的工具，date 是处理日期的工具。" |
| `folder = "test_files"` | "这是指定要处理的文件夹。" |
| `today = date.today().strftime(...)` | "获取今天的日期，格式是年-月-日。" |
| `files = os.listdir(folder)` | "列出文件夹里所有文件的名字，存到 files 这个列表里。" |
| `for filename in files:` | **（重点）** "**这就是循环！** for 的意思是'对于每一个'。这行说：'对于 files 列表里的每一个文件名，做下面的事情'。有5个文件，就会执行5次。" |
| 缩进的代码块 | "缩进的这几行就是'每次重复要做的事'：拼出旧路径、拼出新名字、执行重命名、打印结果。每个文件都会走一遍这几行。" |

**关键强调：**

> "`for 某个东西 in 一堆东西:` 就是说'对于这堆东西里的每一个，做下面的操作'。就像你站在流水线旁边，每来一个产品就做同样的处理。"

#### 3.4 运行 + 修改（2分钟）

**讲师操作：**

1. 运行：`python3 rename.py`
2. 查看结果：`ls test_files/`，看到文件名都加了日期前缀

**修改演示：**

> "如果我不想加日期前缀，想加部门名称呢？"

```
claude "修改 rename.py，把日期前缀改成部门前缀'财务部_'"
```

运行验证。

---

### 第四部分：循环 + 条件组合（3分钟）[0:29-0:32]

**讲师说：**

> "刚才我们学了两样东西：if 做判断，for 做重复。它们经常一起用。比如：你要检查一批成绩，**对于每个人**（循环），**如果**及格就打印'通过'（条件）。"

**讲师快速投影展示一段代码（不需要运行，只读）：**

```python
scores = {"张三": 75, "李四": 58, "王五": 92, "赵六": 43}

for name, score in scores.items():
    if score >= 60:
        print(f"{name}：及格")
    else:
        print(f"{name}：不及格")
```

**讲师逐行指读：**

> - "第一行：一组人名和分数。"
> - "`for name, score in scores.items()`：对于每一组姓名和分数……"
> - "`if score >= 60`：如果分数大于等于60……"
> - "`else`：否则……"
> - "看，循环和条件就是这样组合在一起的。循环负责'一个一个来'，条件负责'到了之后怎么判断'。"

---

### 第五部分：学员练习（13分钟）[0:32-0:45]

#### 练习任务

| 序号 | 任务 | 预计用时 | 类型 |
|:---:|:---|:---:|:---:|
| 1 | 用 Claude Code 生成成绩检查器（见下方提示词），运行成功 | 5分钟 | 必做 |
| 2 | 修改及格线：从60分改成70分，重新运行 | 3分钟 | 必做 |
| 3 | 加功能：让程序统计及格和不及格的人数 | 5分钟 | 选做 |

#### 练习1：生成成绩检查器

**投影显示给学员的 Claude Code 提示词：**

```
claude "写一个Python程序：有5个学员的成绩数据（张三75、李四58、王五92、赵六43、钱七61），用循环遍历每个人，如果分数>=60就打印'姓名：及格'，否则打印'姓名：不及格'。保存到 grade_check.py"
```

**预期生成代码：**

```python
# 成绩检查器
students = {
    "张三": 75,
    "李四": 58,
    "王五": 92,
    "赵六": 43,
    "钱七": 61
}

print("=== 成绩检查结果 ===")
for name, score in students.items():
    if score >= 60:
        print(f"{name}（{score}分）：及格")
    else:
        print(f"{name}（{score}分）：不及格")
```

**学员运行后，讲师投影问：**

> "谁来告诉我，这段代码里哪一行是循环？哪一行是判断？"
>
> （期望答案：`for name, score...` 是循环，`if score >= 60` 是判断）

#### 练习2：修改及格线

**讲师说：**

> "现在假设公司培训要求提高了，70分才算及格。怎么改？"

两种方式都可以：
- 方式A：直接打开文件，把 `>= 60` 改成 `>= 70`
- 方式B：用 Claude Code：`claude "把 grade_check.py 的及格线从60改成70"`

#### 练习3（选做）：统计人数

**提示词：**

```
claude "修改 grade_check.py，在最后加上统计：打印及格人数和不及格人数"
```

**预期追加代码：**

```python
pass_count = 0
fail_count = 0

for name, score in students.items():
    if score >= 70:
        pass_count += 1
    else:
        fail_count += 1

print(f"\n及格人数：{pass_count}")
print(f"不及格人数：{fail_count}")
```

#### 练习期间讲师和助教分工

| 角色 | 职责 |
|:---|:---|
| 沈林伟（主讲） | 在投影上同步做练习1，让学员跟着看；然后巡场帮卡住的学员 |
| 梅杭俊（助教） | 从后排开始巡场，优先帮进度慢的学员；确认每人至少完成练习1和2 |

**巡场检查要点：**
- [ ] 学员是否成功让 Claude Code 生成了代码？
- [ ] 学员是否能运行 `python3 grade_check.py`？
- [ ] 学员是否完成了修改及格线？
- [ ] 学员能否指出代码中的 for 和 if？

---

## 常见问题与应对（FAQ）

| 学员问题 | 讲师回应 |
|:---|:---|
| "if 和 else 之间能不能有多个条件？" | "可以，用 elif（else if 的缩写）。比如加班0-2小时1.5倍，2小时以上2倍。但今天先掌握 if/else 就够了。" |
| "for 循环只能处理文件吗？" | "不是，for 可以处理任何一组东西——文件名、人名、数字、成绩。只要是'一堆东西要一个个处理'，就用 for。" |
| "缩进是什么意思？为什么有的行往右缩了？" | "缩进是 Python 表示'归属'的方式。缩进的行归属于上面那个 if 或 for。就像大纲里的子项目往右缩进一样。" |
| "我自己写不出这些代码怎么办？" | "**不需要你写。** 你的任务是读懂和能改。就像你不需要自己造汽车，但要会开、会换轮胎。代码让 AI 写，你负责理解和调整。" |
| "运行报错 NameError / SyntaxError" | "先看错误信息最后一行，告诉我报的什么错。最常见的是拼写错误或缩进不对。让 Claude Code 帮你修：`claude '运行 grade_check.py 报错了，帮我修复'`" |
| "`>=` 和 `>` 有什么区别？" | "`>=` 是大于等于，`>` 是大于。60分及格用 `>=60`，因为60分本身也算及格。" |

---

## 时间应急方案

| 情况 | 方案 |
|:---|:---|
| 前面讲太慢，练习时间不到10分钟 | 砍掉练习3（选做），确保练习1和2完成 |
| 学员理解快，练习提前完成 | 加餐：让完成的学员帮旁边的同学；或挑战"用中文描述一个新需求，让 Claude Code 写出包含循环和条件的代码" |
| Claude Code 响应慢或报错 | 用备用方案：直接投影展示预先准备好的代码，手动复制到文件运行（见课前检查材料中的备用代码） |
| 学员回顾环节冷场 | 讲师直接用30秒快速回顾，进入正课。不要在开场耗太久 |

---

## 课后讲师反思（每次课后花3分钟填写）

| 维度 | 记录 |
|:---|:---|
| 学员理解 if/else 的情况 | _____ |
| 学员理解 for 循环的情况 | _____ |
| 学员修改参数的完成率 | _____ / _____ 人 |
| 哪个知识点学员最困惑？ | _____ |
| Claude Code 有没有生成不理想的代码？如有，什么情况？ | _____ |
| 时间分配合理吗？哪里超时/不够？ | _____ |
| 下次要调整的地方 | _____ |

---

## 板书/投影要点备忘

课上可以在白板或投影上保留以下内容供学员随时参考：

```
今日两个概念：

1. if / else = 如果 / 否则
   if 条件:
       满足时做这个
   else:
       不满足做那个

2. for = 对于每一个
   for 东西 in 一堆东西:
       对每个东西做这个操作

记住：代码 AI 写，你来读和改！
```
