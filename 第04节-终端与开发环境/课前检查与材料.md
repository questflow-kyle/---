# 第4节：终端与开发环境 —— 课前检查与材料

> **本清单供讲师（沈林伟、尹伟）在上课前完成。**
> **本节课是学员第一次使用终端和 Claude Code。环境问题如果课前不解决，课上将无法教学。**
> **课前检查的时间：建议上课前 45-60 分钟到达教室。** 本节课的课前检查比其他节更重要、耗时更长。

---

## 一、WSL 环境逐台检查（课前45分钟，最关键）

> **这是本节课成败的关键。** WSL 是所有后续操作的基础——终端命令、Python、Claude Code 都跑在 WSL 里。如果 WSL 有问题，这节课等于上不了。
>
> **原则：每一台电脑都必须亲手验证，不能假设"上次装好了就没问题"。**

### 每台电脑检查步骤

对每一台学员电脑，按以下顺序逐项检查：

#### 第1步：WSL 能正常启动

- [ ] 点击开始菜单，找到 **Ubuntu**（或其他 Linux 发行版），点击打开
- [ ] 终端窗口正常出现，显示提示符（类似 `username@hostname:~$`）
- [ ] 输入 `pwd`，确认输出路径（如 `/home/username`）
- [ ] 输入 `ls`，确认命令正常执行（不报错即可，空输出也正常）

**如果 WSL 启动失败**：见下方"故障排除A"

#### 第2步：Python 可用

- [ ] 输入 `python3 --version`，确认输出版本号（如 `Python 3.10.12`）
- [ ] 输入 `python3 -c "print('OK')"` ，确认输出 `OK`

**如果 Python 不可用**：见下方"故障排除B"

#### 第3步：Claude Code 可用

- [ ] 输入 `claude --version`，确认输出版本号
- [ ] 输入 `claude`，确认能正常启动（看到 Claude Code 交互界面）
- [ ] 在 Claude Code 中输入 `你好`，确认能收到回复（说明 API 连接正常）
- [ ] 输入 `/exit` 退出 Claude Code

**如果 Claude Code 不可用**：见下方"故障排除C"

#### 第4步：网络连接

- [ ] 在 WSL 中输入 `curl -s --max-time 5 https://api.anthropic.com > /dev/null && echo "网络正常" || echo "网络异常"`
- [ ] 确认输出"网络正常"

**如果网络异常**：见下方"故障排除D"

#### 第5步：创建工作目录

- [ ] 输入 `mkdir -p ~/learning`
- [ ] 输入 `ls ~ | grep learning`，确认输出 `learning`

### 检查记录表

> 每台电脑检查完在对应格子打勾。**所有列都打勾才算通过。**

| 电脑编号 | WSL启动 | Python | Claude Code | 网络 | 工作目录 | 通过？ | 备注 |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---|
| 1 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 2 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 3 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 4 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 5 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 6 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 7 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 8 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 9 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |
| 10 | [ ] | [ ] | [ ] | [ ] | [ ] | [ ] | |

**统计**：
- 通过台数：____/____ 台
- 有问题台数：____ 台（编号：______）
- 问题已解决：____ 台
- 问题未解决需要备用方案：____ 台

---

## 二、故障排除手册

### 故障排除A：WSL 启动失败

**症状**：点击 Ubuntu 后闪退、报错、或者根本找不到 Ubuntu 应用

**排查步骤**：

1. **检查 WSL 是否已安装**：
   打开 Windows PowerShell（管理员），输入：
   ```powershell
   wsl --list --verbose
   ```
   - 如果有输出（如 `Ubuntu Running`）→ WSL 已安装，可能是其他问题
   - 如果输出空或报错 → WSL 未正确安装

2. **尝试重启 WSL**：
   ```powershell
   wsl --shutdown
   ```
   等待 10 秒，再重新打开 Ubuntu

3. **如果 WSL 完全没装**：
   ```powershell
   wsl --install
   ```
   然后重启电脑。**注意：这个操作需要5-10分钟，课前时间可能不够。**

4. **如果以上都不行**：
   - 该电脑标记为"WSL不可用"
   - 上课时该学员与旁边同学共用电脑
   - 课后再修复

**预防措施**：如果有条件，建议在上课前一天就检查一遍所有电脑的 WSL 状态。

### 故障排除B：Python 不可用

**症状**：`python3 --version` 报 `command not found`

**排查步骤**：

1. **尝试用 python 而非 python3**：
   ```bash
   python --version
   ```
   如果这个可以，说明 Python 装了但命令名不同。记录下来，上课时告诉该学员用 `python` 代替 `python3`

2. **安装 Python**：
   ```bash
   sudo apt update && sudo apt install -y python3
   ```
   大约需要2-3分钟

3. **确认安装成功**：
   ```bash
   python3 --version
   ```

### 故障排除C：Claude Code 不可用

**症状**：`claude` 命令不存在，或启动后报错

**排查步骤**：

1. **检查 claude 是否已安装**：
   ```bash
   which claude
   ```
   - 有输出 → 已安装，问题可能在 API key
   - 无输出 → 未安装

2. **如果未安装**：
   ```bash
   npm install -g @anthropic-ai/claude-code
   ```
   如果 npm 不可用，先安装 Node.js：
   ```bash
   sudo apt update && sudo apt install -y nodejs npm
   ```
   然后再安装 Claude Code

3. **如果已安装但启动报错**：
   - 查看报错信息
   - 常见错误：API key 未配置或无效
   - 检查环境变量：
     ```bash
     echo $ANTHROPIC_API_KEY
     ```
   - 如果为空，需要配置 API key（具体 key 值找沈林伟获取）

4. **如果 API 连接不通**：
   - 可能是网络问题，先排查网络（见故障排除D）
   - 可能是 API key 过期或额度用完

### 故障排除D：网络异常

**症状**：WSL 内无法联网，`curl` 超时

**排查步骤**：

1. **确认 Windows 本身能上网**：
   在 Windows 浏览器中打开 baidu.com

2. **如果 Windows 能上网但 WSL 不能**：
   - 重启 WSL：在 PowerShell 中 `wsl --shutdown`，等 10 秒重新打开
   - 检查 DNS：在 WSL 中输入：
     ```bash
     cat /etc/resolv.conf
     ```
     确认有 `nameserver` 行。如果没有或者指向错误地址：
     ```bash
     sudo sh -c 'echo "nameserver 8.8.8.8" > /etc/resolv.conf'
     ```

3. **如果 Windows 也不能上网**：
   - 检查 WiFi 连接
   - 重启路由器
   - 如果教室网络完全断了，启动手机热点作为临时方案

---

## 三、硬件展示材料准备

### 需要准备的实物

- [ ] **可展示的台式机**：已拆开或部件已拆出，方便逐个展示
  - 需要可辨认的4个部件：CPU、内存条、硬盘（SSD或HDD均可）、主板
  - 如果没有台式机可拆，备用方案：准备这4个部件的**清晰照片**在投影上展示
- [ ] **防静电注意**：提醒尹伟展示时先触摸金属机箱释放静电，不要触摸芯片引脚

### 硬件展示备用方案

如果无法获得可展示的实物：

1. 准备4张高清部件照片（从网上搜"CPU实物图""内存条实物图"等）
2. 投影展示照片，尹伟指着照片讲解
3. 效果会打折扣，但5分钟的快速认识用照片也够了

---

## 四、讲师自己的电脑（投影用）

### 投影电脑检查清单

- [ ] 投影仪连接正常，投影画面清晰
- [ ] **终端字体足够大**：后排学员必须能看清终端中的每一个字符
  - 建议字号 **20-24**
  - 调整方法：终端设置中调大字号，或用 `Ctrl` + `+` 放大
  - **测试方法**：在终端输入 `pwd`，走到最后一排看是否能看清输出
- [ ] WSL 终端可用
- [ ] Python 可用
- [ ] Claude Code 可用且能正常对话
- [ ] 已创建 `~/learning` 目录

### 投影预演

> **必须做一遍完整预演。** 按教案中的环节三和环节四的流程，在投影电脑上走一遍：

1. 打开终端
2. `pwd` → 看到路径
3. `ls` → 看到内容
4. `mkdir learning` → 创建文件夹
5. `cd learning` → 进入
6. `pwd` → 确认位置变了
7. `cd ..` → 退出
8. `cd ~` → 回到 home
9. `python3 --version` → 看到版本号
10. `cd ~/learning` → 进入工作目录
11. `claude` → 启动 Claude Code
12. 输入"用一句话解释什么是终端" → 看到回答
13. 输入"终端里的 ls 命令是做什么用的？" → 看到回答
14. `/exit` → 退出 Claude Code

- [ ] 预演无问题
- [ ] 预演后**清理痕迹**（让课上演示看起来是从零开始的）：
  ```bash
  rm -rf ~/learning/mytest
  ```
  注意：保留 `~/learning` 目录本身（学员电脑上已创建，保持一致）

---

## 五、投影内容准备

课上需要投影的内容，建议提前准备好（可以是文本文件，切换窗口展示）：

### 投影1：硬件四件套（环节二用）

```
电脑核心硬件：

部件        比喻       功能
─────────────────────────────
CPU         大脑       负责计算
内存(RAM)   工作台     临时存放，断电就没
硬盘(SSD)   仓库       长期存储，断电不丢
主板        骨架       连接所有部件
```

### 投影2：终端命令速查（环节三起全程保留）

```
终端命令速查：

pwd              你在哪里（显示当前位置）
ls               这里有什么（列出文件和文件夹）
mkdir 名字       建文件夹
cd 名字          进文件夹
cd ..            回上一层
cd ~             回到 home 目录
clear            清屏
```

### 投影3：Claude Code 和 Python（环节四用，追加到速查）

```
Claude Code：
claude              启动 Claude Code
/exit               退出 Claude Code

Python：
python3 --version   查看 Python 版本
```

### 投影4：练习任务一（环节五用）

```
任务一：终端导航练习

1. 输入 pwd，看看你在哪里
2. 输入 ls，看看当前目录下有什么
3. 创建一个新文件夹：mkdir mytest
4. 进入这个文件夹：cd mytest
5. 确认你进去了：pwd（路径最后应该有 /mytest）
6. 在里面再创建一个文件夹：mkdir abc
7. 查看一下：ls（应该能看到 abc）
8. 退回上一层：cd ..
9. 确认退回来了：pwd

完成后举手！
```

### 投影5：练习任务二（环节五用）

```
任务二：环境验证

1. 回到 home 目录：cd ~
2. 确认 Python 可用：python3 --version
   （应该看到 Python 3.xx.xx）
3. 进入 learning 文件夹：cd ~/learning
4. 启动 Claude Code：claude
5. 问 Claude Code 一个问题，比如：
   - "什么是编程？"
   - "Python 能做什么？"
   - "帮我用一句话鼓励一下我"
   随便问什么都行！
6. 退出 Claude Code：/exit

全部完成后举手！
```

---

## 六、备用方案

### 备用方案A：个别电脑 WSL 不可用（课前修不好）

**发生概率**：中等。WSL 有时候会因为 Windows 更新、休眠等原因出问题。

**应对**：
1. 课前已尽力修复但仍有1-2台不行
2. 该学员与旁边同学**共用一台电脑**
3. 两人一组操作：一人看屏幕一人打字，中间换人
4. 讲师需要在课前确定好配对方案，不要在课上临时安排（浪费时间）
5. 课后必须修复该电脑

### 备用方案B：全部电脑 WSL 不可用（如机房整体环境变更）

**发生概率**：低，但如果发生影响极大。

**应对**：
1. **如果课前还有30分钟以上**：尝试批量修复
   ```powershell
   wsl --shutdown
   ```
   然后逐台重新打开 Ubuntu
2. **如果来不及修**：
   - 硬件认识环节不受影响，正常上
   - 终端和 Claude Code 环节改为**纯演示模式**：
     - 讲师在自己电脑上操作，投影给全班看
     - 每个步骤问学员"你们觉得这个命令会输出什么？"保持互动
     - 练习环节改为口头回答：讲师出题"如果我想创建一个叫 test 的文件夹，应该输入什么命令？"
   - 课后修复所有电脑，下节课前10分钟让学员补做终端练习

### 备用方案C：Claude Code API 不可用（全班）

**发生概率**：低。可能原因：API 服务故障、API key 失效、额度用完。

**应对**：
1. 终端命令教学不受影响，正常上
2. Python 验证不受影响，正常做
3. Claude Code 环节改为：
   - 讲师演示启动 `claude` → 展示它无法连接 → 向学员坦诚："今天API服务有点问题，我们先认识一下界面"
   - 展示 Claude Code 的离线界面，讲解它能做什么
   - 用网页版 Claude（https://claude.ai）替代演示对话功能
   - 告诉学员："下节课之前我会确保修好，大家到时候再亲手体验"
4. 练习任务二中跳过 Claude Code 部分，改为多练几遍终端导航命令

### 备用方案D：投影仪故障

**应对**：
1. 讲师走到每个学员旁边，在学员电脑上演示关键操作
2. 或者让全班围到讲师电脑旁边看（适用于5人以内小班）
3. 终端命令教学受影响较大（学员需要看到讲师的输入和输出），硬件展示受影响较小（实物直接看）
4. 练习环节影响最小——学员看自己的屏幕，讲师巡场指导

### 备用方案E：个别学员迟到

**应对**：
- 如果迟到在5分钟以内（错过了学员回顾）：没关系，正常加入
- 如果迟到在10分钟以内（错过了硬件认识）：安排旁边同学30秒口头说一下"CPU大脑、内存工作台、硬盘仓库、主板骨架"
- 如果迟到超过10分钟（错过了终端教学开头）：
  - 讲师或助教在该学员旁边，花2分钟帮他打开终端，教他 `pwd` 和 `ls`
  - 然后让他跟着当前进度走
  - 课后给该学员发命令速查表，建议自己练几遍

---

## 七、分工确认

| 角色 | 人员 | 课前职责 | 课上职责 |
|:---|:---|:---|:---|
| 主讲（环境部分） | 沈林伟 | 逐台检查 WSL/Python/Claude Code，故障排除 | 讲终端命令 + Claude Code，巡场答疑 |
| 主讲（硬件部分） | 尹伟 | 准备硬件实物/照片，确认防静电措施 | 5分钟硬件展示，之后协助巡场 |

- [ ] 沈林伟和尹伟已沟通确认分工
- [ ] 尹伟已确认硬件实物/照片准备就绪
- [ ] 沈林伟已确认所有电脑环境就绪（或有备用方案）

---

## 八、课前最终确认（上课前15分钟）

以下是上课前最后15分钟的检查，确认一切就绪：

- [ ] 所有电脑环境检查完毕，问题已解决或有明确的备用方案
- [ ] 硬件展示物品放在讲台上，触手可及
- [ ] 投影仪正常，终端字体大小合适（后排能看清）
- [ ] 投影内容已准备好（命令速查表、练习任务等），可以随时切换展示
- [ ] 讲师电脑已完成一遍预演，演示痕迹已清理
- [ ] 网络连接稳定（讲师电脑和学员电脑都确认过）
- [ ] 教案已打开或打印，放在手边可随时查看
- [ ] 尹伟已就位，硬件展示准备完毕
- [ ] 手机设为静音
- [ ] 确认上课时间，准备开始

---

## 九、课后事项

### 课后材料回收/确认

- [ ] 检查每位学员电脑上是否存在 `~/learning` 目录（说明练习完成）
- [ ] 检查每位学员电脑上 `python3 --version` 是否正常（下节课必须可用）
- [ ] 检查每位学员电脑上 `claude` 是否可正常启动（下节课必须可用）
- [ ] 记录哪些学员没有完成全部练习，下节课开头关注
- [ ] 记录课上遇到的环境问题和新的FAQ，更新到教案中

### 为下节课做准备

> 下节课（第5节）学员将第一次用 Claude Code 写程序。环境必须万无一失。

- [ ] 课后再次确认所有电脑 Claude Code 可用
- [ ] 确认 API key 余额充足（第5节每位学员约 5-8 次对话）
- [ ] 如有课上未解决的环境问题，必须在下节课前修复
- [ ] 硬件实物归还/妥善存放
