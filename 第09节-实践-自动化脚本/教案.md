# 第9节：实践——自动化脚本 —— 剧本式教案

## 课时信息

| 项目 | 内容 |
|:---|:---|
| 所属阶段 | 实践课（第9节/共14节，实践课第1节/共5节） |
| 主讲 | 沈林伟 |
| 辅助 | 梅杭俊 |
| 时长 | 45 分钟 |
| 班级规模 | 5-10 人 |
| 前置要求 | 第8节"Claude Code与开发工作流"已完成 |

## 教学目标

学完本节课，学员能够：
1. 用Claude Code独立完成一个文件自动整理脚本
2. 理解脚本的基本逻辑（扫描文件夹 → 判断文件类型 → 移动到子文件夹 → 生成报告）
3. 根据自己的需求修改整理规则（如改分类方式、改文件夹命名）
4. 体验"用中文描述需求 → AI生成代码 → 运行验证 → 修改完善"的完整开发流程

---

## 时间分配

| 环节 | 时长 | 累计 |
|:---|:---:|:---:|
| 开场：学员回顾 | 5分钟 | 0:05 |
| 环节一：任务展示 | 5分钟 | 0:10 |
| 环节二：需求拆解引导 | 5分钟 | 0:15 |
| 环节三：独立开发 | 20分钟 | 0:35 |
| 环节四：成果展示与点评 | 8分钟 | 0:43 |
| 课后小结 | 2分钟 | 0:45 |

### 如果时间超了，按优先级砍

1. **第一刀：缩短成果展示**。从3位学员减到1-2位，省下3-4分钟。
2. **第二刀：缩短需求拆解引导**。讲师直接给出拆解结果，不做讨论，省下2-3分钟。
3. **第三刀：缩短开场回顾**。回顾压缩到2分钟，只让学员说一两句。

**绝对不砍的内容**：独立开发环节（20分钟）。这是本节课的核心，学员必须有充足时间动手。

---

## 开场：学员回顾（5分钟）

### 机制

- 上节课（第8节）结束时已指定本节负责回顾的学员（轮流制）
- 学员用自己的话讲上节课学了什么，2-3分钟
- 讲师补充和纠正，1-2分钟

### 讲师说（引导）

> "今天正式进入实践课了。不过先请XXX来给大家回顾一下上节课的内容。XXX，你来说说上节课我们学了什么？"

（等学员讲完，不管讲得完不完整，先肯定）

> "说得很好。上节课我们学了Claude Code的完整开发流程——怎么描述需求、怎么让AI写代码、怎么运行和调试。今天我们就要用这套流程，独立完成一个真正有用的小工具。"

### 讲师注意

- 学员讲得不完整没关系，重点是让他们开口
- 如果学员紧张说不出来，用提问引导："上节课我们用Claude Code做了什么？""你还记得怎么让Claude Code写代码吗？"
- 讲完后一定要肯定："说得很好"或"方向对了，我补充一点……"
- 自然过渡到今天的主题：从"学工具"到"用工具做东西"

---

## 环节一：任务展示（5分钟）

### 目标

让学员直观看到"乱文件夹 → 运行脚本 → 整理完毕"的完整效果，建立对今天任务的具体认知。

### 讲师说

> "大家看我的屏幕。这是一个文件夹——"

（打开投影，展示混乱文件夹）

> "看到了吗？里面全是乱七八糟的文件。有照片、有PDF、有Word文档、有表格、有文本文件……一共几十个，全堆在一个文件夹里。你们的电脑桌面或者下载文件夹是不是也经常这样？"

（等学员反应，一般会笑或点头）

> "现在我运行一个脚本——"

（在终端运行脚本）

> "大家看，就这么一下——"

（展示整理后的结果）

> "所有文件自动按类型分好了。图片在'图片'文件夹，文档在'文档'文件夹，表格在'表格'文件夹。而且还生成了一份整理报告，告诉你一共处理了多少个文件、每个类型有多少个。
>
> 今天的任务就是——你们每个人自己写出这个脚本。不是我教你们一行一行写，是你们用Claude Code，自己跟AI说需求，自己把它做出来。"

### 动作

1. 打开投影，展示预先准备好的混乱文件夹（`~/messy_folder`），用 `ls` 命令列出文件
2. 在终端运行讲师预先准备好的整理脚本：
   ```bash
   cd ~/messy_folder
   python3 organize.py
   ```
3. 再用 `ls` 展示整理后的文件夹结构，用 `tree` 命令（如果安装了的话）或逐个 `ls` 子文件夹
4. 用 `cat report.txt` 展示整理报告

### 学员屏幕

学员此时不需要操作，只看投影。他们应该看到：
- 投影上一个满是各种文件的文件夹
- 运行脚本后，文件自动归类到子文件夹中
- 一份文字报告总结整理结果

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 学员问"这个脚本代码在哪里" | 对流程好奇 | "等会你们自己用Claude Code写出来的，不是我给你们的。现在先看效果" |
| 学员问"这个难不难" | 有畏难情绪 | "不难。上节课你们已经用Claude Code写过程序了，今天只是任务更实际一点" |

---

## 环节二：需求拆解引导（5分钟）

### 目标

让学员在写代码之前，先用中文想清楚"程序要做哪几步"，培养先想后做的习惯。

### 讲师说

> "在让AI写代码之前，有一步特别重要——先想清楚你要它做什么。
>
> 我问大家一个问题：刚才那个脚本，它做了哪几件事？不用想代码怎么写，就用大白话说，它一步一步做了什么？谁来说说？"

（等学员回答。如果没人说，点名或引导）

> "来，我给个提示。第一步，它需要做什么？——它要先看看文件夹里有什么文件对吧？这就叫'扫描文件夹'。然后呢？"

（引导学员说出以下步骤，每说出一步就写在投影上或白板上）

> "好，大家一起来看。我们把它理出来了：
>
> 1. 扫描文件夹，看看里面有哪些文件
> 2. 判断每个文件是什么类型（看后缀名，.jpg是图片，.pdf是PDF……）
> 3. 创建对应的子文件夹（如果还没有的话）
> 4. 把文件移动到对应的子文件夹
> 5. 生成一份整理报告，说明处理了多少文件
>
> 就这五步。这五步就是你等下要跟Claude Code说的内容。你不需要知道代码怎么写，但你得知道你要它做什么。这就是需求拆解——把一个大任务拆成一步一步的小任务。"

### 动作

- 在投影上展示（或用白板写出）五步拆解结果
- 边听学员回答边写，让学员有参与感
- 如果学员主动说出某一步，肯定他们："对，就是这样"

### 投影内容

```
文件整理脚本——需求拆解：

1. 扫描文件夹，获取所有文件
2. 判断每个文件的类型（看后缀名）
3. 创建对应的子文件夹
4. 把文件移动到对应的子文件夹
5. 生成整理报告
```

### 学员屏幕

学员此时不需要操作自己的电脑，看投影即可。

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 学员说不出步骤 | 没有拆解需求的经验 | 用提问引导："它第一步要干嘛？总得先知道文件夹里有什么吧？" |
| 学员说得太细（比如提到具体函数名） | 之前课学了一些代码知识 | "想法很好，不过我们现在只需要用大白话说清楚就行，具体代码让AI来写" |

---

## 环节三：独立开发（20分钟）

### 目标

学员用Claude Code独立完成文件整理脚本，讲师和助教巡回指导。这是本节课的核心环节。

### 讲师说

> "好，现在轮到你们自己动手了。每个人的电脑上都有一个叫 `messy_folder` 的文件夹，里面放了几十个乱七八糟的文件。你的任务就是：用Claude Code写一个脚本，把这些文件按类型自动整理好。
>
> 怎么开始？三步走：
>
> 第一步，打开终端，进入工作目录：
> ```
> cd ~/messy_folder
> ```
>
> 第二步，启动Claude Code：
> ```
> claude
> ```
>
> 第三步，把你的需求告诉它。刚才我们一起拆解的那五步，用你自己的话告诉Claude Code就行。
>
> 给你们一个参考提示词——"

（投影展示参考提示词）

> "你们可以参考这个，也可以用自己的话说。只要把你要它做什么说清楚就行。
>
> 时间是20分钟。先完成L1的同学，试试L2；L2完成了，挑战L3。先做完的同学，帮一下旁边还没完成的。开始吧！"

### 投影内容——参考提示词

```
参考提示词（可以直接用，也可以用自己的话改写）：

写一个Python脚本 organize.py，功能是自动整理当前文件夹里的文件：
1. 扫描当前文件夹里的所有文件
2. 根据文件后缀名判断类型，分类规则：
   - 图片：.jpg, .jpeg, .png, .gif, .bmp
   - 文档：.doc, .docx, .txt, .pdf
   - 表格：.xls, .xlsx, .csv
   - 视频：.mp4, .avi, .mov
   - 音频：.mp3, .wav, .flac
   - 其他：不认识的后缀放到"其他"文件夹
3. 为每个类型创建子文件夹（如果不存在）
4. 把文件移动到对应的子文件夹
5. 最后打印一份整理报告，说明每个类型整理了多少个文件
```

### 投影内容——分层要求

```
L1（能用）：跑通脚本，文件成功分类到子文件夹
  → 完成标准：运行 python3 organize.py 后，文件被移动到了对应的子文件夹

L2（能调）：在L1基础上，修改分类规则或文件夹命名
  → 比如：把子文件夹名改成英文（Images、Documents……）
  → 或者：加一个新的分类（比如"代码"类：.py, .js, .html）
  → 并且能说出脚本中循环和条件判断分别在做什么

L3（能交付）：在L2基础上，添加额外功能
  → 比如：检测重复文件（文件名相同的怎么处理）
  → 或者：生成整理日志保存到文件（不只是打印到屏幕）
  → 或者：支持命令行参数（指定要整理的文件夹路径）
```

### 动作

1. 投影上展示参考提示词和分层要求，全程保留
2. 确认所有学员都进入了 `~/messy_folder` 目录并启动了Claude Code
3. 开始巡回，梅杭俊同时巡回（分左右两侧）

### 巡场要点

#### 前5分钟（0:15-0:20）：确保每个人都启动了

- 重点观察：有没有人还没进入目录、还没启动Claude Code
- 如果有人卡在启动环节，梅杭俊立即过去帮忙
- 确认每个人都把需求发给了Claude Code

#### 中间10分钟（0:20-0:30）：观察进度，区分层级

- 重点观察：学员是否只是让AI跑通了（L1），还是在尝试理解和修改（L2/L3）
- 对已经跑通L1的学员，走过去说：

> "不错，已经跑通了。你看看代码里的 `for` 循环在做什么？能不能试着加一个新的分类？"

- 对还在和Claude Code对话的学员，看看他们卡在哪里：
  - 如果是提示词写得不清楚导致AI生成的代码不对 → 引导他们把需求说得更具体
  - 如果是代码报错 → 引导他们先自己读错误信息，再把错误信息发给Claude Code

> "报错了？没关系，先看看错误信息说了什么。看不懂也没事，把这个错误信息直接发给Claude Code，让它帮你修。"

- 鼓励L1的学员至少尝试改一个参数（如子文件夹命名）：

> "你已经做完基础功能了，试试改一下，比如把文件夹名字改成英文的？"

#### 后5分钟（0:30-0:35）：同伴互助

- 先完成的学员引导去帮助未完成的：

> "你已经做好了，看看旁边的同学需不需要帮忙？去看看他卡在哪里，帮他一下。"

- 如果大部分人卡在同一个地方，暂停巡回，统一讲解：

> "大家先停一下。我看好几个人都遇到了同一个问题——（说明问题和解决方法）。好，继续。"

### 学员屏幕预期

学员在这个环节应该依次看到：
1. 终端进入 `~/messy_folder` 目录
2. Claude Code启动并等待输入
3. 输入需求后，Claude Code生成 `organize.py` 文件
4. 退出Claude Code（或在Claude Code中直接运行）
5. 运行 `python3 organize.py`，看到文件被整理到子文件夹中
6. 屏幕上打印整理报告（如"图片：8个，文档：6个……"）

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| Claude Code生成的代码有语法错误 | AI偶尔会出错 | "把报错信息发给Claude Code，告诉它'运行报错了，请修复'，它会自己改" |
| 脚本运行了但没有移动文件 | 可能路径不对，或者脚本逻辑有问题 | "用 `ls` 看看文件还在不在原来的位置。如果没动，把情况告诉Claude Code让它检查" |
| 学员不知道怎么描述需求 | 不习惯用文字表达需求 | "就像刚才我们拆解的那五步，用你自己的话说就行。投影上有参考提示词，可以直接用" |
| 学员只完成了L1不知道怎么做L2 | 不知道怎么提修改需求 | "你想改哪里？比如把文件夹名改成英文——跟Claude Code说'把子文件夹名改成英文，比如Images、Documents'就行" |
| 脚本把 organize.py 本身也移走了 | 脚本没有排除自身 | "好问题，告诉Claude Code'脚本不要移动自己，也不要移动已经创建的子文件夹'" |
| 学员直接复制投影上的提示词 | 想省事 | 没关系，先跑通再说。但鼓励他们跑通后试着用自己的话修改需求 |

---

## 环节四：成果展示与点评（8分钟）

### 目标

请2-3位学员展示自己的成果，讲师点评并总结不同层级的差异。

### 讲师说

> "好，时间到。大家做得怎么样？有没有谁愿意展示一下自己的成果？把你的屏幕给大家看看，说说你做了什么。"

（如果没人主动，点名一位已完成L1的学员和一位尝试了L2/L3的学员）

> "来，XXX，你先来。把你的终端切到投影上，给大家看看。"

（学员展示后）

> "很好。大家看，XXX的脚本已经能自动把文件分类了。我们一起看看他/她的代码——"

（简要指出代码中的关键逻辑）

> "这里有一个 `for` 循环，它在做什么？——它在一个一个地看文件夹里的文件。然后这个 `if`，它在判断文件后缀名。这就是我们一开始拆解的那五步，变成了代码。
>
> 不需要你现在能自己写出来，但你要能看懂它在做什么。"

（如果有学员做到了L2/L3，再请他展示）

> "XXX做了一些额外的功能，我们来看看。"

（展示后点评）

> "你看，同样一个任务，基础版本是按文件类型分类，但XXX加了（重复文件检测/日志保存/按日期分类……）。这就是从L1到L2、L3的区别——L1是跑通，L2是能改，L3是能加功能。"

### 动作

1. 请2-3位学员依次将屏幕投影展示
2. 每位学员展示时，讲师简要点评代码中的关键逻辑
3. 对比不同层级的完成情况
4. 对所有展示的学员表示肯定

### 讲师注意

- 不管学员完成到哪个层级，都要肯定："你能跑通就已经很好了""你能改规则说明你在理解代码了"
- 如果有学员没完成L1，不要当众指出，课后单独帮忙
- 展示的学员如果紧张，帮他说："你跑一下脚本让大家看看效果？"

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 没有学员愿意展示 | 害羞或觉得做得不好 | 提前巡场时就物色好展示人选，巡场时跟他们说"等会请你展示一下" |
| 展示时脚本报错了 | 课上修改过代码引入了bug | "没关系，报错很正常。我们一起看看错误是什么——这就是真实开发中会遇到的情况" |

---

## 课后小结（2分钟）

### 讲师说

> "好，今天的课到这里。我们总结一下今天做了什么：
>
> 第一，你们每个人独立完成了一个文件整理脚本——这是你们用AI写出来的第一个真正有用的工具。
>
> 第二，我们练了一个重要的方法：在写代码之前，先用中文把需求拆清楚。不需要知道代码怎么写，但要知道程序要做哪几步。
>
> 第三，遇到报错不要慌，把错误信息发给AI让它帮你修——这就是实际开发中天天在做的事情。
>
> 下节课我们做第二个实践项目——数据处理工具。今天的文件整理是处理文件，下次是处理数据。方法一样，任务更进一步。
>
> 最后，今天谁来负责下节课的开场回顾？"

（指定一名学员负责下节课的回顾）

> "好，XXX你来。下节课开头用两三分钟说说今天我们做了什么就行，不用紧张。大家辛苦了，下课。"

### 布置课后任务（可选）

- 如果学员有自己的电脑且Claude Code可用：尝试用脚本整理自己电脑上的一个文件夹（注意先备份！）
- 如果没有条件课后练习：无强制课后任务

---

## FAQ

### Q1：我跟Claude Code说了需求，但它生成的代码跑不了怎么办？

> **讲师回答**："很正常，AI生成的代码不是每次都对。你把报错信息复制下来，直接发给Claude Code，告诉它'这段代码报错了，错误信息是XXX，请修复'。它一般都能自己改好。如果改了还不行，就多说一些具体情况，比如'我要整理的文件在当前目录'。"

### Q2：我可以用自己的话写需求吗？一定要按投影上的写吗？

> **讲师回答**："完全可以用自己的话。投影上那个只是参考。你只要把你想让程序做什么说清楚就行。其实用自己的话说反而更好，因为你得自己想清楚需求是什么。"

### Q3：脚本把自己也移走了怎么办？

> **讲师回答**："哈哈，这是个经典问题。你跟Claude Code说'脚本运行的时候不要移动脚本自己，也不要移动生成的子文件夹'，它就会在代码里加上排除逻辑。以后写脚本都要注意这种边界情况。"

### Q4：我能不能不按文件类型分类，改成按日期分类？

> **讲师回答**："当然可以，这就是L2的要求。你跟Claude Code说'不按文件类型分类，改成按文件的修改日期分类，比如2025年1月的文件放一个文件夹'。试试看，这是很好的练习。"

### Q5：这个脚本以后能用在自己电脑上吗？

> **讲师回答**："完全可以。这就是我们做实践课的目的——做出来的东西是真的能用的。不过用之前建议先在一个测试文件夹里试一下，确认没问题再用在重要文件上。养成好习惯：先备份，再操作。"

---

## 课后记录模板

> 每次课后，讲师花5分钟填写以下记录。这份记录会帮助改进教案和帮助下一位讲师。

### 课后三问

**1. 什么留下了印象？（学员反应最好的环节是什么？）**

```
记录：


```

**2. 什么有效？（哪个教学方法/例子效果好？）**

```
记录：


```

**3. 什么要改？（哪个环节卡壳了？时间分配需要调整吗？例子需要更新吗？）**

```
记录：


```

### 补充记录

**学员完成情况（每位学员达到的等级）：**

```
记录：
学员1：L_ | 学员2：L_ | 学员3：L_ | 学员4：L_ | 学员5：L_
学员6：L_ | 学员7：L_ | 学员8：L_ | 学员9：L_ | 学员10：L_
```

**学员出现的典型问题（记下来更新到FAQ中）：**

```
记录：


```

**个别学员需要关注的情况：**

```
记录：


```
