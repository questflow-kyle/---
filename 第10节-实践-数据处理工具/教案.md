# 第10节：实践——数据处理工具 —— 剧本式教案

## 课时信息

| 项目 | 内容 |
|:---|:---|
| 所属阶段 | 实践课（第10节/共14节，实践课第2节/共5节） |
| 主讲 | 沈林伟 |
| 辅助 | 梅杭俊 |
| 时长 | 45 分钟 |
| 班级规模 | 5-10 人 |
| 前置要求 | 第9节-实践：自动化脚本（学员已用Claude Code完成过一个完整小项目） |

## 教学目标

学完本节课，学员能够：
1. 用Claude Code开发一个多步骤的数据处理工具（考勤数据→工资计算）
2. 理解"输入数据→处理逻辑→输出结果"的通用数据处理模式
3. 用中文拆解需求步骤，再交给Claude Code实现
4. 根据实际业务规则调整处理逻辑（如修改加班费倍率、增加全勤奖）

## 分层要求

| 等级 | 关键词 | 完成标准 |
|:---:|:---:|:---|
| L1 | 能用 | 用Claude Code跑通工具，输入考勤CSV，输出每人的工资结果（终端打印即可） |
| L2 | 能调 | L1 + 修改工资计算规则（如调整加班费倍率、增加全勤奖）；能解释数据处理的每个步骤在做什么 |
| L3 | 能交付 | L2 + 输出格式化的工资单CSV文件；添加数据校验（如检测异常考勤记录）；工具带使用说明 |

---

## 时间分配

| 环节 | 时长 | 累计 |
|:---|:---:|:---:|
| 开场：学员回顾 | 5分钟 | 0:05 |
| 任务展示：从CSV到工资单 | 5分钟 | 0:10 |
| 需求拆解引导 | 5分钟 | 0:15 |
| 独立开发 | 20分钟 | 0:35 |
| 成果展示与对比 | 8分钟 | 0:43 |
| 课后小结 | 2分钟 | 0:45 |
| 总计 | 45分钟 | 0:45 |

---

## 开场：学员回顾（5分钟）

### 机制

- 上节课（第9节）结束时已指定本节负责回顾的学员（轮流制）
- 学员用自己的话讲上节课学了什么，2-3分钟
- 讲师补充和纠正，1-2分钟

### 讲师说（引导）

> "好，上课之前先请XXX来给大家回顾一下上节课的内容。XXX，你来说说上节课我们做了什么？"

（等学员讲完，2-3分钟）

### 讲师说（补充）

> "说得很好。上节课我们做了第一个实践项目——自动化脚本。核心就是三步：先想清楚要做什么，然后用中文告诉Claude Code，最后运行看结果。今天我们继续用同样的方法，但任务更贴近真实工作——我们要处理数据。"

### 讲师注意

- 学员讲得不完整没关系，重点是让他们开口
- 如果学员紧张说不出来，用提问引导："上节课我们做了什么工具？""用了什么方法让Claude Code帮我们写代码？"
- 讲完后一定要肯定："说得很好"或"方向对了，我补充一点......"

---

## 环节一：任务展示——从CSV到工资单（5分钟）

### 讲师说

> "今天的任务跟大家的工作直接相关——做一个考勤数据处理工具。什么意思呢？我先演示给大家看。"

### 动作

1. 投影切到终端，打开考勤CSV文件让学员看到原始数据

### 讲师说

> "大家看投影。这是一份考勤记录，CSV格式，就是用逗号分隔的表格。里面记了每个员工每天的出勤情况——有正常上班的，有迟到的，有缺勤的，有加班的。"

（在终端用命令展示CSV前几行）

```bash
cd ~/learning
head -10 attendance.csv
```

### 学员屏幕

学员此时不需要操作，只看投影。投影上显示类似：

```
姓名,日期,上班打卡,下班打卡,状态
张三,2026-01-02,08:55,18:05,正常
张三,2026-01-03,09:15,18:00,迟到
张三,2026-01-04,,,缺勤
张三,2026-01-05,08:50,20:30,加班
...
```

### 讲师说

> "现在我运行一下我提前做好的工具——"

### 动作

2. 运行预先准备好的工资计算脚本

```bash
python3 salary.py
```

### 讲师说

> "大家看输出。每个人的工资算出来了：基本工资多少、加班费多少、迟到扣了多少、最终应发多少。原来要人工一条一条算的东西，现在一秒钟全部搞定。
>
> 这就是今天大家要做的事——自己开发这个工具。
>
> 我再多说一句：这个'读取数据→处理数据→输出结果'的模式，不光是算工资能用。你以后统计销售数据、整理客户信息、做报表，全是这个模式。学会了这个模式，以后换个场景你也会做。"

### 学员屏幕

投影显示工具运行结果，类似：

```
====== 工资计算结果 ======

姓名：张三
  出勤天数：19天
  迟到次数：2次
  缺勤天数：1天
  加班时长：6.5小时
  基本工资：4500.00元
  加班费：+232.76元
  迟到扣款：-100.00元
  缺勤扣款：-204.55元
  应发工资：4428.21元

姓名：李四
  ...
```

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 学员问"CSV是什么" | 没接触过这个概念 | 简单解释："CSV就是一种表格文件，用逗号分隔每一列的数据。你用Excel打开也能看，但它本质就是一个文本文件。" |
| 学员觉得太难 | 看到最终结果复杂 | 安抚："这看起来复杂，但我们不是自己写代码，是让Claude Code帮我们写。关键是你能把需求说清楚就行。" |

---

## 环节二：需求拆解引导（5分钟）

### 讲师说

> "好，刚才大家看到了最终效果。现在我们来想一下：如果你是一个HR，你手工算工资要怎么算？一步一步来。"

### 动作

- 在投影上打开一个空白文本，准备记录学员的回答
- 或者用白板/纸笔

### 讲师说

> "我问你们，第一步要干嘛？"

（引导学员回答，预期答案：先看考勤记录/先读取数据）

> "对，第一步：**读取考勤数据**。把CSV文件的内容加载进来。
>
> 然后呢？数据读进来了，下一步？"

（引导学员回答，预期答案：统计每个人的情况）

> "对，第二步：**统计每个人的出勤情况**。正常几天、迟到几次、缺勤几天、加班多少小时，算清楚。
>
> 接下来？"

（引导学员回答，预期答案：算钱/算工资）

> "对，第三步：**按规则计算工资**。基本工资加上加班费，减去迟到扣款和缺勤扣款。
>
> 最后？"

（引导学员回答，预期答案：输出/打印结果）

> "对，第四步：**输出结果**。把每个人的工资明细打印出来，或者存成文件。"

### 动作

- 在投影上写出/展示四个步骤的总结：

```
考勤数据处理四步走：
1. 读取考勤CSV数据
2. 按员工统计出勤情况（正常/迟到/缺勤/加班）
3. 按工资规则计算每人应发工资
4. 输出工资明细结果
```

### 讲师说

> "大家记住这四步。等一下你们跟Claude Code说的时候，就把这四步当成需求告诉它。你不需要知道代码怎么写，但你要能把需求拆成清晰的步骤——这是用AI开发最重要的能力。
>
> 现在我把工资计算的规则告诉大家。"

### 动作

- 投影切到工资参数表（课前检查与材料中准备好的）

### 讲师说

> "大家看投影上的工资参数表："

**投影内容——工资参数表：**

```
====== 工资计算规则 ======

基本月薪：4500元
每月标准工作天数：22天
日薪 = 基本月薪 ÷ 22 = 204.55元（约）

加班费：
  - 工作日加班：按日薪 ÷ 8 × 1.5 倍计算（每小时）
  - 即：每小时加班费 = 204.55 ÷ 8 × 1.5 ≈ 38.35元

迟到扣款：
  - 每次迟到扣50元

缺勤扣款：
  - 每天缺勤扣一天日薪（204.55元）

全勤奖（L2加分项）：
  - 当月无迟到无缺勤，奖励200元
```

### 讲师说

> "这些规则不用死记，等一下给Claude Code说需求的时候，你可以把这些数字直接写进去。好，现在开始动手。"

### 学员屏幕

学员此时还不需要操作，只需要理解任务和规则。

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 学员不开口回答问题 | 害羞或不确定 | 直接点名："张三你觉得第一步是什么？" 给足等待时间，不要急着给答案 |
| 学员说的步骤顺序不对 | 正常，逻辑思维需要锻炼 | 不批评，引导："你说的这个也要做，但如果数据还没读进来，能先算工资吗？" |

---

## 环节三：独立开发（20分钟）

### 讲师说

> "好，现在是你们自己动手的时间。每个人打开终端，进入工作目录，启动Claude Code，把刚才拆好的需求告诉它，让它帮你写一个考勤数据处理和工资计算的工具。
>
> 考勤数据文件已经放在你们电脑上了，路径是 `~/learning/attendance.csv`。工资参数表投影上一直放着，随时可以看。
>
> 先说一下目标：
> - **所有人先做到L1**：跑通工具，输入考勤CSV，输出每人的工资结果。终端里能看到结果就行。
> - **L1做完有余力的，做L2**：修改工资计算规则，比如加一个全勤奖——当月无迟到无缺勤的人多发200块。
> - **L2也做完了的同学，挑战L3**：把结果输出成一个新的CSV文件，再加上数据校验——比如如果有人的打卡时间明显不对（凌晨3点打卡），程序要提示出来。
>
> 现在开始。先完成的同学，帮一下旁边还没完成的。有问题随时举手。"

### 动作

- 确认每位学员都开始操作
- 梅杭俊和沈林伟分别巡场，覆盖所有学员
- 投影保持显示工资参数表，方便学员随时查看

### 参考提示词（学员可能会用到的，讲师心里有数即可，不主动告诉学员）

**L1基础版提示词：**

> 我有一个考勤数据文件 attendance.csv，在 ~/learning/ 目录下。请帮我写一个Python程序 salary.py，功能是：
> 1. 读取 attendance.csv 文件
> 2. 按员工统计出勤情况：正常天数、迟到次数、缺勤天数、加班小时数
> 3. 按以下规则计算每人工资：
>    - 基本月薪4500元，每月标准工作天数22天
>    - 迟到一次扣50元
>    - 缺勤一天扣一天日薪（4500÷22）
>    - 加班费按日薪÷8×1.5倍计算每小时
> 4. 在终端打印每个人的工资明细

**L2修改版提示词：**

> 修改 salary.py，增加一个全勤奖的规则：如果某个员工当月没有迟到也没有缺勤，额外奖励200元。

**L3进阶版提示词：**

> 再修改 salary.py：
> 1. 把工资计算结果输出到一个新的CSV文件 salary_result.csv
> 2. 增加数据校验：如果发现打卡时间在凌晨0点到6点之间，标记为"异常记录"并打印警告

### 巡场要点

#### 第1-5分钟：确认所有人启动

- 重点观察：学员是否成功进入 `~/learning` 目录并启动 Claude Code
- 如果有学员不知道怎么启动，轻声提醒：`cd ~/learning` 然后 `claude`
- 确认每人都在Claude Code中输入了需求

#### 第5-10分钟：关注需求描述质量

- 重点观察：学员发给Claude Code的需求是否清晰
- 常见问题：需求太模糊（如只说"帮我算工资"）——引导学员把四个步骤和具体参数写进去
- 如果学员不知道怎么写提示词，可以提示："你看投影上的四个步骤和工资参数，把这些信息告诉Claude Code就行"

#### 第10-15分钟：帮助调试

- 重点观察：代码是否能成功运行
- 常见问题：文件路径不对、CSV格式读取错误
- 如果学员代码报错，引导他们把报错信息贴回Claude Code让它修复

#### 第15-20分钟：引导进阶

- L1完成的学员：引导做L2（加全勤奖）
- L2完成的学员：引导做L3（输出CSV + 数据校验）
- **先完成的学员**：明确要求他们帮旁边还没完成的同学。讲师说："你做完了？太好了，去帮一下XX，看看他/她卡在哪里。"

### 学员屏幕（预期进展）

**5分钟时**：Claude Code已经接收到需求，正在生成代码

**10分钟时**：代码文件已创建，学员正在运行或调试

**15分钟时**：L1基本完成，部分学员开始尝试L2

**20分钟时**：大部分完成L1，快的完成L2，个别在做L3

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| Claude Code生成的代码运行报错 | CSV文件路径不对，或编码问题 | 让学员把报错信息直接发给Claude Code："把这个报错贴给它，让它修复。" |
| 学员写的需求太模糊，生成的代码功能不全 | 没有把四个步骤和参数都写进需求 | 走过去看学员的提示词，指着投影上的参数表说："这些规则你告诉它了吗？" |
| 代码跑出来但数字明显不对 | 计算逻辑有误（如加班费公式错） | 引导学员检查："你用计算器手动算一下张三的工资，看跟程序算出来的一不一样。不一样就告诉Claude Code哪里算错了。" |
| 学员不知道怎么修改（L2） | 不确定如何向Claude Code提修改需求 | 提示："你就直接跟它说'增加一个全勤奖的规则：如果没迟到没缺勤就多给200块'，用大白话说就行。" |
| 有学员始终跑不通 | 可能环境或API有问题 | 梅杭俊重点关注，先尝试帮助解决。如果5分钟内解决不了，安排和旁边同学共用一台电脑，两人一组一人操作一人指导 |

---

## 环节四：成果展示与对比（8分钟）

### 讲师说

> "好，时间到。不管做到哪一步都没关系，我们来看看大家的成果。有没有谁愿意展示一下自己的工具？把你的终端投影出来让大家看看。"

### 动作

- 选择2-3位学员展示（尽量选不同进度的：一位L1、一位L2、一位L3）
- 如果没人主动，就点名邀请
- 将学员的屏幕投影出来（或让学员在自己电脑上演示，讲师走过去在旁边解说）

### 展示流程（每人2-3分钟）

#### 第1位学员（L1水平）

### 讲师说

> "来，XXX先给大家展示一下。你运行一下你的程序，让大家看看结果。"

（学员运行程序，展示输出结果）

> "很好，基本功能完全跑通了。大家注意看，他/她的程序读取了CSV，统计了每个人的出勤情况，算出了工资。这就是L1的标准——工具能用，结果正确。"

#### 第2位学员（L2水平）

### 讲师说

> "接下来请XXX。你做了什么修改？给大家说说。"

（学员展示修改后的版本，说明加了什么功能）

> "不错，他/她在原来的基础上加了全勤奖。大家看这个对比——王五没有迟到没有缺勤，所以多拿了200块全勤奖。这就是L2的标准——你不仅能用工具，还能根据新的业务规则去调整它。"

#### 第3位学员（L3水平，如果有）

### 讲师说

> "还有一位做得更多，XXX你来展示一下。"

（学员展示输出的CSV文件和数据校验功能）

> "大家看，他/她的程序不光打印结果，还把结果保存成了一个CSV文件，可以直接用Excel打开。而且他/她还加了数据校验——如果有人的打卡时间是凌晨3点，程序会提醒你检查一下。这就是L3的标准——能交付一个完整的、别人能直接用的工具。"

### 讲师说（对比总结）

> "大家注意一个事情：这三位同学的工具，功能不一样、代码也不一样，但用的方法是一样的——都是先拆需求，再让Claude Code生成代码，运行、调试、修改。
>
> 这就是我想强调的：**用AI开发，最重要的不是你会不会写代码，而是你能不能把需求说清楚。** 需求说清楚了，AI就能帮你实现。需求说不清楚，AI生成的东西就不是你想要的。"

### 可能的卡点

| 现象 | 原因 | 讲师应对 |
|:---|:---|:---|
| 没有学员愿意展示 | 害羞或觉得自己做得不好 | 主动点名，并且先说"不管做到哪一步都很好，重点是看过程不是看结果" |
| 展示时程序报错 | 正常情况 | 不要慌，这正好是教学机会："大家看，报错了。没关系，我们看看怎么修——XXX你把这个报错贴给Claude Code试试" |
| 时间不够展示3个人 | 前面环节超时 | 只展示2个人，一个L1一个L2/L3，重点讲对比 |

---

## 课后小结（2分钟）

### 讲师说

> "好，今天我们学了一件很重要的事：**怎么用AI处理数据**。
>
> 具体来说是三个要点：
>
> **第一，数据处理有固定模式。** 不管你以后是算工资、统计销售额、还是整理客户名单，流程都是一样的：读取数据→处理数据→输出结果。记住这个模式。
>
> **第二，需求拆解是关键。** 今天我们先把任务拆成四个步骤，再告诉Claude Code。以后遇到任何复杂任务都这么做——先拆步骤，再找AI帮你实现。
>
> **第三，修改规则很简单。** 想加全勤奖？直接用大白话告诉AI。想改加班费倍率？改个数字的事。规则是你定的，AI负责执行。
>
> 今天没做完L2的同学，如果有条件的话课后可以继续试试。下节课我们做一个更有意思的项目——网页应用开发。到时候你们做的东西能在浏览器里打开，像一个真正的网站一样。"

### 指定下节课回顾学员

> "下节课开场回顾由XXX来讲。你回去想想今天这节课我们学了什么、做了什么，下节课用自己的话给大家说一遍就行。"

---

## FAQ

### Q1：CSV文件一定要用Python处理吗？用Excel不行吗？

> **讲师回答**："用Excel当然可以。但今天的重点不是处理这一份考勤表，而是学会做一个'工具'。Excel每次都要手动操作，但你做的这个工具，下个月来了新的考勤数据，直接运行一下就自动算出来了。这就是写程序和用Excel的区别——程序可以反复用，Excel要反复操作。"

### Q2：如果考勤数据格式变了怎么办？比如列的顺序变了。

> **讲师回答**："好问题。你可以告诉Claude Code：'帮我修改程序，让它自动检测CSV的列名，不依赖固定的列顺序。'这就是L3的思路——让工具更健壮、适应性更强。"

### Q3：我的计算结果跟别人不一样，谁是对的？

> **讲师回答**："先别急着看谁对谁错。你用计算器手动算一个员工的工资，跟你程序的结果对一下。如果手算的和程序的不一样，说明程序的计算逻辑有问题，把你发现的问题告诉Claude Code让它改。这叫'验证'——写工具的时候养成验证结果的习惯，很重要。"

### Q4：这个工具能处理更大的数据吗？比如几百人几千条记录？

> **讲师回答**："完全可以。Python处理几千条甚至几万条数据都没问题。你今天用的CSV有20多条记录是为了方便学习，实际工作中换成更大的文件，代码不用改，直接跑就行。这就是程序的好处——数据量变大，处理速度不会慢太多。"

### Q5：我想在自己公司用这个工具，但考勤格式跟今天用的不一样怎么办？

> **讲师回答**："这正是你今天学到的最有价值的东西。你把你公司的考勤格式截个图或者拿一段样本数据，发给Claude Code，告诉它'这是我公司的考勤数据格式，帮我做一个工资计算工具'。只要你能把格式和规则说清楚，Claude Code就能帮你做出来。"

---

## 时间应急方案

### 如果时间超了，按优先级砍

1. **第一刀：成果展示从3人减为2人**。只展示一个L1和一个L2，对比讲解。省下3分钟。
2. **第二刀：需求拆解环节从互动问答改为直接展示**。讲师直接讲四个步骤，不等学员回答。省下2分钟。
3. **第三刀：课后小结压缩成一句话**。"今天学了数据处理的固定模式：读取→处理→输出，记住这个模式就行。"省下1分钟。

**绝对不砍的内容**：独立开发环节（20分钟）。这是实践课的核心，必须保证学员有足够的动手时间。

### 如果时间有富余

- 让更多学员展示成果
- 引导L1完成的学员尝试L2
- 做一个现场扩展：让某位学员当场向Claude Code提一个新需求（如"加一个按部门汇总的功能"），大家一起看AI怎么实现

---

## 课后记录模板

> 每次课后，讲师花5分钟填写以下记录。这份记录会帮助改进教案和帮助下一位讲师。

### 课后三问

**1. 什么留下了印象？（学员反应最好的环节是什么？）**

```
记录：


```

**2. 什么有效？（哪个教学方法/例子效果好？）**

```
记录：


```

**3. 什么要改？（哪个环节卡壳了？时间分配需要调整吗？例子需要更新吗？）**

```
记录：


```

### 补充记录

**学员完成情况：**

| 学员 | 达到等级 | 备注 |
|:---|:---:|:---|
|  | L1 / L2 / L3 |  |
|  | L1 / L2 / L3 |  |
|  | L1 / L2 / L3 |  |
|  | L1 / L2 / L3 |  |
|  | L1 / L2 / L3 |  |

**学员出现的典型问题（记下来更新到FAQ中）：**

```
记录：


```

**个别学员需要关注的情况：**

```
记录：


```
